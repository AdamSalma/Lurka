@import '~sass/utils'

$thread-post-control-width: 200px  // TODO: move to injected variables
$quotelink-color: var(--primary)
$post-color: var(--threadPostBackground)
$highlight-color: $highlight-color

.ThreadPost
    display: block
    position: relative
    width: $thread-width - 4px
    padding: 2px 8px
    text-align: left
    background-color: $post-color
    transition: background .2s .1s ease-out
    border-bottom: $thread-post-border-color solid 4px
    border-left: $thread-post-border-color solid 5px
    overflow: hidden

    &:before
        content: ""
        transition: background .2s .1s ease-out
        position: absolute
        +position(0, 0)
        +set-dims(2px, 100%)
        background: $post-color

    &.highlight
        position: relative
        background: $highlight-color
        transition: none !important

        &:before
            transition: none !important
            background: var(--primary)

    /* Tooltip */
    &.tip
        z-index: $thread-tooltip-z-index
        border: 2px solid $grey-light
        position: absolute
        max-width: 800px
        width: auto
        padding-right: 40px
        word-wrap: break-word
        white-space: pre-line
        box-shadow: 0 4px 8px rgba(0,0,0,0.16), 0 4px 30px rgba(0,0,0,0.23);
        transform: translateY(20px)
        opacity: 0

        &.animate
            transition: all $animation-speed-fast $bezier-bounce
            transform: translateY(0)
            pointer-events: none
            opacity: 1

        a
            color: $quotelink-color

        .thread-media
            margin-right: 10px
            float: left

        .dual-media-thumbnail
            display: initial !important

        .dual-media-children
            display: none !important










    blockquote
        +font-size(0)
        margin: 15px 25px
        margin-top: 0
        color: #e7e7e8;

    .media-info
        font-size: $font-size-xsmall
        position: relative
        bottom: 3px

        > span
            margin-right: 4px

        .fileinfo
            color: grey(3)

        .Icon
            color: $primary-lightest
            font-size: 13px
            position: relative
            top: 1px

    .post-info
        +font-size(-1)
        padding: 5px 0
        color: var(--textSecondary)
        padding-left: 4px

        > *
            display: inline-block
            padding: 0 3px

        .title
            color: var(--textPrimary) !important
            strong
                margin-right: 5px

        .id
            font-family: font-for(ThreadPost__PostID)
            color: var(--textPrimary)

        .name
            padding-left: 0px

    // Reference block
    .references
        display: block
        clear: both
        color: grey(4)
        padding-bottom: 2px

        .Line
            width: calc(100% - 142px)
            margin: 0 auto

        .reference-header
            margin-right: 6px
            font-size: 11px
            color: #6d6767

            .reply-count
                bottom: 5px
                font-size: 11px
                position: absolute
                right: 12px
                min-width: 18px
                text-align: center

            .Icon
                top: 1px
                position: relative

        .quotelink
            margin-right: 5px
            display: inline-block
            font-size: 11px
            font-weight: normal
            color: $quotelink-color

    br
        line-height: 0.8

    .title
        z-index: 1



    /* 4chan links */
    blockquote .quote
        background-color: $grey-dark
        // border-left: 2px solid grey        // #3e2e2e   // #422e2e
        color: $quote-color
        // padding: 6px 8px 6px 6px
        padding: 4px 8px
        padding-right: 10px
        display: inline-block
        margin-bottom: 6px

        &:first-letter
            margin-right: 3px

    .deadlink
        color: var(--textDisabled)
        text-decoration: line-through
        font-family: font-for(ThreadPost__deadlink)

        &::after
            content: "deleted"
            text-decoration: none
            display: inline-block
            vertical-align: bottom
            margin: auto 4px
            font-size: $font-size-xsmall
            color: var(--textSecondary)
            font-family: font-for(ThreadPost__deadlink)
            font-variant: small-caps
            letter-spacing: 0.075em

    .quotelink
        color: $quotelink-color
        text-decoration: none
        font-weight: bold
        transition: 0.1s ease-out
        font-family: font-for(ThreadPost__quotelink)
        font-size: 15px
        +clickable


.ThreadPost__controls
    font-size: 18px
    position: absolute
    right: 0
    top: 0


    .menu-toggle
        +clickable
        margin-top: 2px
        color: var(--primary)
        padding-right: 10px
        font-size: 22px


    .menu
        display: flex
        flex-direction: row-reverse
        position: absolute
        right: 0
        top: 0
        background-color: $post-color
        padding: 8px 6px 0 0
        z-index: 1
        transform: translateX($thread-post-control-width)
        transition: transform 1s $animation-speed-fast $bezier-fast

        li
            +clickable
            +hover-color(color(primary, light))
            color: grey(4)
            margin-left: 12px
            list-style-type: none

            span
                padding: 6px

            &:last-child
                margin-left: 0

    // &:hover .menu
        // transform: translateX(0)
        // transition: transform $animation-speed-fast $bezier-fast

