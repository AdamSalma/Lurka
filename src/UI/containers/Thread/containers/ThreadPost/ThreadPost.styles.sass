@import '~sass/partials'

$thread-post-control-width: 200px
$quotelink-color: theme(dark, primary)

.ThreadPost
    background-color: $thread-post-color
    display: block
    width: $thread-width - 4px
    text-align: left
    padding: 2px 8px
    position: relative
    transition: background .2s .1s ease-out
    border-bottom: grey(9) solid 4px
    border-left: grey(9) solid 5px
    overflow: hidden

    @include breakpoint(to-tablet)
        width: 100% !important

    &:before
        content: ""
        transition: background .2s .1s ease-out
        position: absolute
        +position(0, 0)
        +set-dims(2px, 100%)
        background: theme(dark, $thread-post-color)

    &.highlight
        position: relative
        background: theme(dark, highlight)
        transition: none !important

        &:before
            transition: none !important
            background: theme(dark, primary)

    &:last-child
        margin-bottom: $header-height

    /* Tooltip */
    &.tip
        z-index: $thread-tooltip-z-index
        border: 2px solid grey(6)
        position: absolute
        max-width: 800px
        width: auto
        padding-right: 40px
        word-wrap: break-word
        white-space: pre-line
        box-shadow: 0 0 8px grey(10)
        transform: translateY(20px)
        opacity: 0

        &.animate
            transition: all $animation-speed-fast $bezier-bounce
            transform: translateY(0)
            pointer-events: none
            opacity: 1

        a
            color: $quotelink-color

        .thread-media
            margin-right: 10px
            float: left

        .dual-media-thumbnail
            display: initial !important

        .dual-media-children
            display: none !important










    blockquote
        margin: 15px 25px
        margin-top: 0

    .media-info
        font-size: $font-size-xsmall
        position: relative
        bottom: 3px

        > span
            margin-right: 4px

        .fileinfo
            color: grey(3)

        .Icon
            color: theme(dark, secondary, lightest)
            font-size: 13px
            position: relative
            top: 1px

    .post-info
        +font-size($thread-post-info-size)
        padding: 5px 0
        color: theme(dark, text-secondary)

        > *
            display: inline-block
            padding: 0 3px

        .title
            color: theme(dark, text-primary) !important
            strong
                margin-right: 5px

        .id
            font-family: font-for(ThreadPost__PostID)
            color: theme(dark, text-primary)

        .name
            padding-left: 0px

    // Reference block
    .references
        display: block
        clear: both
        color: grey(4)
        padding-bottom: 2px

        .Line
            width: calc(100% - 142px)
            margin: 0 auto

        .reference-header
            margin-right: 6px
            font-size: 11px

            .reply-count
                bottom: 5px
                font-size: 11px
                position: absolute
                right: 12px
                min-width: 18px
                text-align: center

            .Icon
                top: 1px
                position: relative

        .quotelink
            margin-right: 5px
            display: inline-block
            font-size: 11px
            font-weight: normal
            color: $quotelink-color

    br
        line-height: 0.8

    .title
        z-index: 1



    /* 4chan links */
    blockquote .quote
        $background: #611716;
        $background: #4c1413;   // #b78933
        $background: darken(adjust-hue(theme(dark, primary), 40%), 10%)
        background: grey(5)
        border-left: 2px solid theme(dark, primary, darkest)
        // border-left: 2px solid theme(dark, primary, light)
        // border-left: 2px solid mix(white, $background, 30%)
        color: lighten(theme(dark, primary), 21%)
        // padding: 6px 8px 6px 6px
        padding: 4px 8px
        // background: theme(dark, primary)
        margin-bottom: 6px
        display: inline-block

    .deadlink
        color: theme(dark, text-disabled)
        text-decoration: line-through
        font-family: font-for(ThreadPost__deadlink)

        &::after
            content: "deleted"
            text-decoration: none
            display: inline-block
            vertical-align: bottom
            margin: auto 4px
            font-size: $font-size-xsmall
            color: theme(dark, text-secondary)
            font-family: font-for(ThreadPost__deadlink)
            font-variant: small-caps
            letter-spacing: 0.075em

    .quotelink
        color: $quotelink-color
        text-decoration: none
        font-weight: bold
        transition: 0.1s ease-out
        font-family: font-for(ThreadPost__quotelink)
        font-size: 15px
        +clickable


.ThreadPost__controls
    font-size: 18px
    position: absolute
    right: 0
    top: 0


    .menu-toggle
        +clickable
        margin-top: 2px
        color: theme(dark, primary)
        padding-right: 10px
        font-size: 22px


    .menu
        display: flex
        flex-direction: row-reverse
        position: absolute
        right: 0
        top: 0
        background-color: $thread-post-color
        padding: 8px 6px 0 0
        z-index: 1
        transform: translateX($thread-post-control-width)
        transition: transform 1s $animation-speed-fast $bezier-fast

        li
            +clickable
            +hover-color(color(primary, light))
            color: grey(4)
            margin-left: 12px
            list-style-type: none

            span
                padding: 6px

            &:last-child
                margin-left: 0

    &:hover .menu
        transform: translateX(0)
        transition: transform $animation-speed-fast $bezier-fast

